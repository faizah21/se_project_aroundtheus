!function(){"use strict";var e=class{constructor(e,t){this._inputSelector=t.inputSelector,this._formElement=e,this._submitButtonSelector=t.submitButtonSelector,this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._inputElements=[...this._formElement.querySelectorAll(this._inputSelector)]}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}toggleButtonState(){this._checkFormValidity()?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))})),this.toggleButtonState()}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_checkFormValidity(){return this._inputElements.some((e=>!e.validity.valid))}_showInputError(e,t){this._errorMessageEl=this._formElement.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorMessageEl.textContent=t,this._errorMessageEl.classList.add(this._errorClass)}_hideInputError(e,t){this._errorMessageEl=this._formElement.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorMessageEl.textContent="",this._errorMessageEl.classList.remove(this._errorClass)}};class t{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{const t=this._renderer(e);this.addItem(t)}))}addItem(e){this._container.prepend(e)}}class s{constructor(e){this._popup=document.querySelector(e),this._closeButton=this._popup.querySelector(".modal__close")}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscClose)}close=()=>{this._popup.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscClose)};_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._closeButton.addEventListener("click",this.close),this._popup.addEventListener("mousedown",(e=>{e.target===e.currentTarget&&this.close()}))}}class r extends s{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super(t),this._handleFormSubmit=s,this.form=this._popup.querySelector(".modal__form"),this._inputList=this.form.querySelectorAll(".modal__input")}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){const t=Object.values(e);for(let e=0;e<t.length;e++)this._inputList[e].value=t[e]}setEventListeners(){super.setEventListeners(),this.form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}setButtonText(e){this.form.querySelector(".modal__button").textContent=e}}class i{constructor(e,t,s,r,i,n){let{_id:o,name:a,link:l,isLiked:c}=e;this.id=o,this._name=a,this._link=l,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteClick=r,this._handleLikeClick=i,this._handleUnlikeClick=n,this.isLiked=c}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this.isLiked?this._handleUnlikeClick(this):this._handleLikeClick(this)})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteClick(this)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick()}))}addLike=()=>{this.isLiked=!0,this._likeButton.classList.add("card__like-button_active")};removeLike=()=>{this.isLiked=!1,this._likeButton.classList.remove("card__like-button_active")};_setLikeButtonState(){this.isLiked?this.addLike():this.removeLike()}deleteCard=()=>{this._cardElement.remove(),this._cardElement=null};generateCard(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardTitle.textContent=this._name,this._setLikeButtonState(),this._setEventListeners(),this._cardElement}}const n={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},o=document.querySelector("#profile-edit-button"),a=document.querySelector("#profile-edit-modal"),l=document.querySelector(".profile__title__input"),c=document.querySelector(".profile__description__input"),d=a.querySelector(".modal__form"),h=document.querySelector(".profile_image_edit_button"),u=document.querySelector(".profile__add-button"),_=document.querySelector("#add-card-form"),m=(_.querySelector(".modal__input_type_title"),document.querySelector("#delete-button"),_.querySelector(".modal__input_type_url"),document.querySelector("#change-picture-form")),p=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error :${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then((e=>this._checkResponse(e)))}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then((e=>this._checkResponse(e)))}updateUserInfo(e){let{name:t,job:s}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then((e=>this._checkResponse(e)))}addNewCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then((e=>this._checkResponse(e)))}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then((e=>this._checkResponse(e)))}updateCardLike(e,t){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:t?"DELETE":"PUT",headers:this._headers}).then((e=>this._checkResponse(e)))}updateAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then((e=>this._checkResponse(e)))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"a3bf07df-abe1-4d92-b90d-a2e03911adc5","Content-Type":"application/json"}});function E(e){const{name:t,link:s}=e;return new i(e,"#card-template",(()=>{return e=t,r=s,void S.open({name:e,link:r});var e,r}),g,C,B).generateCard()}const S=new class extends s{constructor(e){super(e),this._image=this._popup.querySelector(".modal__image"),this._title=this._popup.querySelector(".modal__description")}open(e){this._image.src=e.link,this._image.alt=e.name,this._title.textContent=e.name,super.open()}}("#image-modal");S.setEventListeners();const v=new r({popupSelector:"#profile-edit-modal",handleFormSubmit:function(e){v.setButtonText("Saving..."),p.updateUserInfo(e).then((e=>{L.setUserInfo(e.name,e.about),v.close()})).catch((t=>{console.error(t),console.log(e)})).finally((()=>{v.setButtonText("Save")}))}});v.setEventListeners();const f=new e(d,n),b=new e(_,n);b.enableValidation();const k=new r({popupSelector:"#add-card-modal",handleFormSubmit:function(e){console.log("Submitting add card form...");const t={name:e.title,link:e.url};p.addNewCard(t).then((e=>{const t=E(e);q.addItem(t),k.close(),k.form.reset(),b.toggleButtonState()})).catch((e=>{console.error("Error adding new card:",e)})).finally((()=>{k.setButtonText("Save")}))}});k.setEventListeners(),u.addEventListener("click",(()=>{k.open()}));const L=new class{constructor(e){let{nameSelector:t,jobSelector:s,avatarSelector:r}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(s),this._avatarElement=document.querySelector(r)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(e,t){this._nameElement.textContent=e,this._jobElement.textContent=t}setAvatar(e){this._avatarElement.src=e}}({nameSelector:".profile__title",jobSelector:".profile__description",avatarSelector:".profile__image"});o.addEventListener("click",(()=>{const{name:e,job:t}=L.getUserInfo(),s=L.getUserInfo();l.value=e,c.value=t,f.enableValidation(),v.setInputValues(s),v.open()}));const y=new class extends s{constructor(e,t){super(e),this._form=this._popup.querySelector(".modal__form"),this._handleFormSubmit=t,this.setEventListeners()}setSubmitHandler(e){this._handleFormSubmit=e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()}))}setButtonText(e){this._form.querySelector(".modal__button").textContent=e}}("#delete-card-modal");function g(e){y.open(),y.setSubmitHandler((function(){y.setButtonText("Deleting"),p.deleteCard(e.id).then((()=>{y.close(),e.deleteCard()})).catch((e=>{console.error(e)})).finally((()=>{y.setButtonText("Delete")}))}))}function C(e){p.updateCardLike(e.id,e.isLiked).then((()=>{e.addLike()})).catch((e=>{console.error(e)}))}function B(e){p.updateCardLike(e.id,e.isLiked).then((()=>{e.removeLike()})).catch((e=>{console.error(e)}))}let q;p.getUserInfo().then((e=>{L.setUserInfo(e.name,e.about),L.setAvatar(e.avatar)})).catch((e=>{console.error(e)})),p.getInitialCards().then((e=>{q=new t({items:e,renderer:E},".cards__list"),q.renderItems()})).catch((e=>{console.log(e)}));const I=new r({popupSelector:"#change-picture-modal",handleFormSubmit:function(e){I.setButtonText("Saving..."),p.updateAvatar(e).then((e=>{L.setAvatar(e.avatar),I.close()})).catch((e=>{console.log(e)})).finally((()=>{I.setButtonText("Save")}))}});I.setEventListeners(),new e(m,n).enableValidation(),h.addEventListener("click",(()=>{I.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUN4Q1osY0FBZSx3QkFDZmEsaUJBT0YsU0FBZ0NpSSxHQUM5QkQsRUFBZ0IvRyxjQUFjLGFBQzlCMEMsRUFDRzRCLGFBQWEwQyxHQUNieEQsTUFBTVIsSUFDTHRELEVBQVM0RyxVQUFVdEQsRUFBSTZELFFBQ3ZCRSxFQUFnQnhJLE9BQU8sSUFFeEIyRyxPQUFPRyxJQUNORCxRQUFRRSxJQUFJRCxFQUFNLElBRW5CRSxTQUFRLEtBQ1B3QixFQUFnQi9HLGNBQWMsT0FBTyxHQUUzQyxJQW5CQStHLEVBQWdCcEksb0JBQ2MsSUFBSThHLEVBQWNoRCxFQUFrQmhJLEdBRTVDaUIsbUJBa0J0QjRHLEVBQWEzRyxpQkFBaUIsU0FBUyxLQUNyQ29MLEVBQWdCMUksTUFBTSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMuanMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihmb3JtRWxlbWVudCwgY29uZmlnKSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XG5cbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gW1xuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSxcbiAgICBdO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2NoZWNrRm9ybVZhbGlkaXR5KCkpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuICBfY2hlY2tGb3JtVmFsaWRpdHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0RWxlbWVudHMuc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgICB0aGlzLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG4gIGFkZEl0ZW0oY2FyZERhdGEpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChjYXJkRGF0YSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuICAgIFxuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSA9ICgpID0+IHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH07XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlKTtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xuICB9XG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBmb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZvcm1WYWx1ZXM7XG4gIH1cblxuICBzZXRJbnB1dFZhbHVlcyh1c2VySW5mbykge1xuICAgIC8vdXNlckluZm8ubmFtZSwgdXNlckluZm8uZGVzY3JpcHRpb25cbiAgICBjb25zdCB1c2VyQXJyYXkgPSBPYmplY3QudmFsdWVzKHVzZXJJbmZvKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHVzZXJBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5faW5wdXRMaXN0W2ldLnZhbHVlID0gdXNlckFycmF5W2ldO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICB9XG5cbiAgc2V0QnV0dG9uVGV4dChidXR0b25UZXh0KSB7XG4gICAgdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKS50ZXh0Q29udGVudCA9IGJ1dHRvblRleHQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICB7IF9pZCwgbmFtZSwgbGluaywgaXNMaWtlZCB9LFxuICAgIGNhcmRTZWxlY3RvcixcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxuICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxuICAgIGhhbmRsZUxpa2VDbGljayxcbiAgICBoYW5kbGVVbmxpa2VDbGlja1xuICApIHtcbiAgICB0aGlzLmlkID0gX2lkO1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcbiAgICB0aGlzLl9oYW5kbGVVbmxpa2VDbGljayA9IGhhbmRsZVVubGlrZUNsaWNrO1xuICAgIHRoaXMuaXNMaWtlZCA9IGlzTGlrZWQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy9saWtlIGJ1dHRvblxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLmlzTGlrZWQpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlVW5saWtlQ2xpY2sodGhpcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodGhpcyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgLy9kZWxldGUgYnV0dG9uXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayh0aGlzKTtcbiAgICB9KTsgLy8gT3BlbiBjb25maXJtYXRpb24gcG9wdXBcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljaygpO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkTGlrZSA9ICgpID0+IHtcbiAgICB0aGlzLmlzTGlrZWQgPSB0cnVlO1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfTtcbiAgcmVtb3ZlTGlrZSA9ICgpID0+IHtcbiAgICB0aGlzLmlzTGlrZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH07XG4gIF9zZXRMaWtlQnV0dG9uU3RhdGUoKSB7XG4gICAgdGhpcy5pc0xpa2VkID8gdGhpcy5hZGRMaWtlKCkgOiB0aGlzLnJlbW92ZUxpa2UoKTtcbiAgfVxuICBkZWxldGVDYXJkID0gKCkgPT4ge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcbiAgfTtcblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgLy9hbHNvIGtub3duIGFzIGdldFZpZXdcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxuICAgICk7XG5cbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fc2V0TGlrZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gICAgLy8gY2FyZEltYWdlRWwuYWx0ID0gY2FyZERhdGEubmFtZTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29uc3RhbnRzIHtcbiAgIGluaXRpYWxDYXJkcyA9IFtcbiAgICB7XG4gICAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICAgIH0sXG4gIFxuICAgIHtcbiAgICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgICB9LFxuICBcbiAgICB7XG4gICAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gICAgfSxcbiAgXG4gICAge1xuICAgICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgICB9LFxuICBcbiAgICB7XG4gICAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gICAgfSxcbiAgXG4gICAge1xuICAgICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gICAgfSxcbiAgXTtcbn1cbiAgZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gICAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG4gIH07XG4iLCJpbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQgQ29uc3RhbnRzLCB7IGNvbmZpZyB9IGZyb20gXCIuLi91dGlscy5qcy9jb25zdGFudHNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XG5cbi8vcHJvZmlsZSBzZWxlY3RvcnM6XG5jb25zdCBwcm9maWxlRWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcbmNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZV9faW5wdXRcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uX19pbnB1dFwiXG4pO1xuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgYXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX2ltYWdlX2VkaXRfYnV0dG9uXCIpO1xuLy9jYXJkIHNlbGVjdG9yc1xuY29uc3QgYWRkTmV3Q2FyZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmNvbnN0IGFkZENhcmRGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtZm9ybVwiKTtcbmNvbnN0IGNhcmRUaXRsZUlucHV0ID0gYWRkQ2FyZEZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19pbnB1dF90eXBlX3RpdGxlXCJcbik7XG5jb25zdCBtb2RhbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVsZXRlLWJ1dHRvblwiKTtcbmNvbnN0IGNhcmRUaXRsZVVybCA9IGFkZENhcmRGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dF90eXBlX3VybFwiKTtcblxuY29uc3QgdXBkYXRlQXZhdGFyRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2hhbmdlLXBpY3R1cmUtZm9ybVwiKTtcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiYTNiZjA3ZGYtYWJlMS00ZDkyLWI5MGQtYTJlMDM5MTFhZGM1XCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxuZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCB7IG5hbWUsIGxpbmsgfSA9IGNhcmREYXRhO1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgY2FyZERhdGEsXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICAgICgpID0+IGhhbmRsZUltYWdlQ2xpY2sobmFtZSwgbGluayksXG4gICAgaGFuZGxlRGVsZXRlQ2xpY2ssXG4gICAgaGFuZGxlTGlrZUNsaWNrLFxuICAgIGhhbmRsZVVubGlrZUNsaWNrXG4gICk7XG4gIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGltYWdlTmFtZSwgaW1hZ2VMaW5rKSB7XG4gIGltYWdlUG9wdXAub3Blbih7IG5hbWU6IGltYWdlTmFtZSwgbGluazogaW1hZ2VMaW5rIH0pO1xufVxuXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2ltYWdlLW1vZGFsXCIpO1xuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwcm9maWxlRWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQsXG59KTtcbnByb2ZpbGVFZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0ZSA9IG5ldyBGb3JtVmFsaWRhdG9yKHByb2ZpbGVFZGl0Rm9ybSwgY29uZmlnKTtcbmNvbnN0IGNhcmRGb3JtVmFsaWRhdGUgPSBuZXcgRm9ybVZhbGlkYXRvcihhZGRDYXJkRm9ybUVsZW1lbnQsIGNvbmZpZyk7XG5cbmNhcmRGb3JtVmFsaWRhdGUuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBjYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IFwiI2FkZC1jYXJkLW1vZGFsXCIsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IGhhbmRsZUFkZENhcmRGb3JtU3VibWl0LFxufSk7XG5jYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQoZGF0YSkge1xuICBjb25zb2xlLmxvZyhcIlN1Ym1pdHRpbmcgYWRkIGNhcmQgZm9ybS4uLlwiKTtcblxuICBjb25zdCBjYXJkRGF0YSA9IHsgbmFtZTogZGF0YS50aXRsZSwgbGluazogZGF0YS51cmwgfTtcblxuICBhcGlcbiAgICAuYWRkTmV3Q2FyZChjYXJkRGF0YSlcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IHJlbmRlckNhcmQocmVzKTtcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgICAgY2FyZFBvcHVwLmNsb3NlKCk7XG4gICAgICBjYXJkUG9wdXAuZm9ybS5yZXNldCgpO1xuXG4gICAgICBjYXJkRm9ybVZhbGlkYXRlLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWRkaW5nIG5ldyBjYXJkOlwiLCBlcnJvcik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBjYXJkUG9wdXAuc2V0QnV0dG9uVGV4dChcIlNhdmVcIik7XG4gICAgfSk7XG59XG5cbmFkZE5ld0NhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2FyZFBvcHVwLm9wZW4oKTtcbn0pO1xuXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdChmb3JtRGF0YSkge1xuICBwcm9maWxlRWRpdFBvcHVwLnNldEJ1dHRvblRleHQoXCJTYXZpbmcuLi5cIik7XG4gIGFwaVxuICAgIC51cGRhdGVVc2VySW5mbyhmb3JtRGF0YSlcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXMubmFtZSwgcmVzLmFib3V0KTtcbiAgICAgIHByb2ZpbGVFZGl0UG9wdXAuY2xvc2UoKTtcbiAgICAgIC8vbW9kYWxfX2Zvcm0ucmVzZXQoKTtcbiAgICB9KVxuXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIGNvbnNvbGUubG9nKGZvcm1EYXRhKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHByb2ZpbGVFZGl0UG9wdXAuc2V0QnV0dG9uVGV4dChcIlNhdmVcIik7XG4gICAgfSk7XG59XG5cbi8vVXNlckluZm9cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZVwiLFxuICBqb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcbiAgYXZhdGFyU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2ltYWdlXCIsXG59KTtcblxucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc3QgeyBuYW1lLCBqb2IgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIGNvbnN0IHByb2ZpbGV1c2VySW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gbmFtZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBqb2I7XG4gIHByb2ZpbGVGb3JtVmFsaWRhdGUuZW5hYmxlVmFsaWRhdGlvbigpO1xuICBwcm9maWxlRWRpdFBvcHVwLnNldElucHV0VmFsdWVzKHByb2ZpbGV1c2VySW5mbyk7XG4gIHByb2ZpbGVFZGl0UG9wdXAub3BlbigpO1xufSk7XG5cbmNvbnN0IGRlbGV0ZUNvbmZpcm1hdGlvbk1vZGFsID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcIiNkZWxldGUtY2FyZC1tb2RhbFwiKTtcblxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2xpY2soY2FyZCkge1xuICBmdW5jdGlvbiBkZWxldGVDYXJkKCkge1xuICAgIGRlbGV0ZUNvbmZpcm1hdGlvbk1vZGFsLnNldEJ1dHRvblRleHQoXCJEZWxldGluZ1wiKTtcbiAgICBhcGlcbiAgICAgIC5kZWxldGVDYXJkKGNhcmQuaWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGRlbGV0ZUNvbmZpcm1hdGlvbk1vZGFsLmNsb3NlKCk7XG4gICAgICAgIGNhcmQuZGVsZXRlQ2FyZCgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH0pXG5cbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgZGVsZXRlQ29uZmlybWF0aW9uTW9kYWwuc2V0QnV0dG9uVGV4dChcIkRlbGV0ZVwiKTtcbiAgICAgIH0pO1xuICB9XG4gIGRlbGV0ZUNvbmZpcm1hdGlvbk1vZGFsLm9wZW4oKTtcbiAgZGVsZXRlQ29uZmlybWF0aW9uTW9kYWwuc2V0U3VibWl0SGFuZGxlcihkZWxldGVDYXJkKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlTGlrZUNsaWNrKGNhcmQpIHtcbiAgYXBpXG4gICAgLnVwZGF0ZUNhcmRMaWtlKGNhcmQuaWQsIGNhcmQuaXNMaWtlZClcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBjYXJkLmFkZExpa2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBoYW5kbGVVbmxpa2VDbGljayhjYXJkKSB7XG4gIGFwaVxuICAgIC51cGRhdGVDYXJkTGlrZShjYXJkLmlkLCBjYXJkLmlzTGlrZWQpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgY2FyZC5yZW1vdmVMaWtlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pO1xufVxuXG5hcGlcbiAgLmdldFVzZXJJbmZvKClcbiAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhLm5hbWUsIGRhdGEuYWJvdXQpO1xuICAgIHVzZXJJbmZvLnNldEF2YXRhcihkYXRhLmF2YXRhcik7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9KTtcblxubGV0IGNhcmRTZWN0aW9uO1xuYXBpXG4gIC5nZXRJbml0aWFsQ2FyZHMoKVxuICAudGhlbigoY2FyZHMpID0+IHtcbiAgICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICAgICAgeyBpdGVtczogY2FyZHMsIHJlbmRlcmVyOiByZW5kZXJDYXJkIH0sXG4gICAgICBcIi5jYXJkc19fbGlzdFwiXG4gICAgKTtcblxuICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbiAgfSk7XG5cbmNvbnN0IGVkaXRBdmF0YXJNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogXCIjY2hhbmdlLXBpY3R1cmUtbW9kYWxcIixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdCxcbn0pO1xuZWRpdEF2YXRhck1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5jb25zdCBhdmF0YXJVcGRhdGVWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih1cGRhdGVBdmF0YXJGb3JtLCBjb25maWcpO1xuXG5hdmF0YXJVcGRhdGVWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5mdW5jdGlvbiBoYW5kbGVBdmF0YXJGb3JtU3VibWl0KGlucHV0VmFsdWVzKSB7XG4gIGVkaXRBdmF0YXJNb2RhbC5zZXRCdXR0b25UZXh0KFwiU2F2aW5nLi4uXCIpO1xuICBhcGlcbiAgICAudXBkYXRlQXZhdGFyKGlucHV0VmFsdWVzKVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldEF2YXRhcihyZXMuYXZhdGFyKTtcbiAgICAgIGVkaXRBdmF0YXJNb2RhbC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgZWRpdEF2YXRhck1vZGFsLnNldEJ1dHRvblRleHQoXCJTYXZlXCIpO1xuICAgIH0pO1xufVxuXG5hdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZWRpdEF2YXRhck1vZGFsLm9wZW4oKTtcbn0pO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQVBJIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yIDoke3Jlcy5zdGF0dXN9YCk7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIHVwZGF0ZVVzZXJJbmZvKHsgbmFtZSwgam9iIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIGFib3V0OiBqb2IsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XG4gIH1cblxuICBhZGROZXdDYXJkKHsgbmFtZSwgbGluayB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGxpbmsgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgLy9uZWVkIHRvIGFkZCB0aGUgdmFyaWFibGUgb2YgY2FyZElEXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIHVwZGF0ZUNhcmRMaWtlKGNhcmRJZCwgaXNMaWtlZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IGlzTGlrZWQgPyBcIkRFTEVURVwiIDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xuICB9XG5cbiAgdXBkYXRlQXZhdGFyKGxpbmspIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkobGluayksXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuICAgIHRoaXMuX3RpdGxlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZGVzY3JpcHRpb25cIik7XG4gIH1cbiAgb3BlbihkYXRhKSB7XG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2ltYWdlLmFsdCA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcbiAgfVxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBqb2I6IHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuICBzZXRVc2VySW5mbyhuYW1lLCBqb2IpIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCA9IGpvYjtcbiAgfVxuICBzZXRBdmF0YXIobGluaykge1xuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjID0gbGluaztcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuXG4gICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG4gIHNldFN1Ym1pdEhhbmRsZXIoaGFuZGxlcikge1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVyO1xuICB9XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCgpO1xuICAgIH0pO1xuICB9XG4gIHNldEJ1dHRvblRleHQoYnV0dG9uVGV4dCkge1xuICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpLnRleHRDb250ZW50ID0gYnV0dG9uVGV4dDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwiZm9ybUVsZW1lbnQiLCJjb25maWciLCJ0aGlzIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX2Zvcm1FbGVtZW50IiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uIiwicXVlcnlTZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5wdXRFbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlbmFibGVWYWxpZGF0aW9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiX2NoZWNrRm9ybVZhbGlkaXR5IiwiY2xhc3NMaXN0IiwiYWRkIiwiZGlzYWJsZWQiLCJyZW1vdmUiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInNvbWUiLCJlcnJvck1lc3NhZ2UiLCJfZXJyb3JNZXNzYWdlRWwiLCJpZCIsInRleHRDb250ZW50IiwiU2VjdGlvbiIsIl9yZWYiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZG9jdW1lbnQiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJjYXJkRWxlbWVudCIsImFkZEl0ZW0iLCJjYXJkRGF0YSIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfY2xvc2VCdXR0b24iLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiZm9ybSIsIl9pbnB1dExpc3QiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJmb3JtVmFsdWVzIiwiaW5wdXQiLCJuYW1lIiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsInVzZXJJbmZvIiwidXNlckFycmF5IiwiT2JqZWN0IiwidmFsdWVzIiwiaSIsImxlbmd0aCIsInNldEJ1dHRvblRleHQiLCJidXR0b25UZXh0IiwiQ2FyZCIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZUxpa2VDbGljayIsImhhbmRsZVVubGlrZUNsaWNrIiwiX2lkIiwibGluayIsImlzTGlrZWQiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9oYW5kbGVVbmxpa2VDbGljayIsIl9saWtlQnV0dG9uIiwiX2RlbGV0ZUJ1dHRvbiIsIl9jYXJkSW1hZ2UiLCJhZGRMaWtlIiwicmVtb3ZlTGlrZSIsIl9zZXRMaWtlQnV0dG9uU3RhdGUiLCJkZWxldGVDYXJkIiwiX2NhcmRFbGVtZW50IiwiZ2VuZXJhdGVDYXJkIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9jYXJkVGl0bGUiLCJzcmMiLCJhbHQiLCJmb3JtU2VsZWN0b3IiLCJwcm9maWxlRWRpdEJ0biIsInByb2ZpbGVFZGl0TW9kYWwiLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwicHJvZmlsZUVkaXRGb3JtIiwiYXZhdGFyQnV0dG9uIiwiYWRkTmV3Q2FyZEJ0biIsImFkZENhcmRGb3JtRWxlbWVudCIsInVwZGF0ZUF2YXRhckZvcm0iLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsInRoZW4iLCJnZXRVc2VySW5mbyIsInVwZGF0ZVVzZXJJbmZvIiwiX3JlZjIiLCJqb2IiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwiYWRkTmV3Q2FyZCIsIl9yZWYzIiwiY2FyZElkIiwidXBkYXRlQ2FyZExpa2UiLCJ1cGRhdGVBdmF0YXIiLCJhdXRob3JpemF0aW9uIiwicmVuZGVyQ2FyZCIsImltYWdlTmFtZSIsImltYWdlTGluayIsImltYWdlUG9wdXAiLCJfaW1hZ2UiLCJfdGl0bGUiLCJkYXRhIiwicHJvZmlsZUVkaXRQb3B1cCIsImZvcm1EYXRhIiwic2V0VXNlckluZm8iLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImxvZyIsImZpbmFsbHkiLCJwcm9maWxlRm9ybVZhbGlkYXRlIiwiRm9ybVZhbGlkYXRvciIsImNhcmRGb3JtVmFsaWRhdGUiLCJjYXJkUG9wdXAiLCJ0aXRsZSIsInVybCIsImNhcmRTZWN0aW9uIiwicmVzZXQiLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJfYXZhdGFyRWxlbWVudCIsInNldEF2YXRhciIsInByb2ZpbGV1c2VySW5mbyIsImRlbGV0ZUNvbmZpcm1hdGlvbk1vZGFsIiwiX2Zvcm0iLCJzZXRTdWJtaXRIYW5kbGVyIiwiaGFuZGxlciIsImNhcmQiLCJhdmF0YXIiLCJjYXJkcyIsImVkaXRBdmF0YXJNb2RhbCIsImlucHV0VmFsdWVzIl0sInNvdXJjZVJvb3QiOiIifQ==